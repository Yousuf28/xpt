[{"name":"app.R","content":"library(shiny)\n\n# Define UI for data upload app ----\nui <- fluidPage(\n\n  # App title ----\n  # titlePanel(\"Uploading Files\"),\n\n  # Sidebar layout with input and output definitions ----\n  # sidebarLayout(\n\n    # Sidebar panel for inputs ----\n    # sidebarPanel(width = 2,\n\n      # Input: Select a file ----\n      # fileInput(\"file1\", \"Choose CSV File\",\n      #           multiple = FALSE,\n      #           accept = c(\"text/csv\",\n      #                    \"text/comma-separated-values,text/plain\",\n      #                    \".csv\")),\n      \n      shiny::fileInput('file1', \"Choose xpt file\",\n                       accept = '.xpt'),\n\n      # Horizontal line ----\n      # tags$hr(),\n\n      # Input: Checkbox if file has header ----\n      # checkboxInput(\"header\", \"Header\", TRUE),\n\n      # Input: Select separator ----\n      # radioButtons(\"sep\", \"Separator\",\n      #              choices = c(Comma = \",\",\n      #                          Semicolon = \";\",\n      #                          Tab = \"\\t\"),\n      #              selected = \",\"),\n\n      # Input: Select quotes ----\n      # radioButtons(\"quote\", \"Quote\",\n      #              choices = c(None = \"\",\n      #                          \"Double Quote\" = '\\\\\"',\n      #                          \"Single Quote\" = \"'\"),\n      #              selected = '\\\\\"'),\n\n      # Horizontal line ----\n      tags$hr(),\n\n      # Input: Select number of rows to display ----\n    #   radioButtons(\"disp\", \"Display\",\n    #                choices = c(Head = \"head\",\n    #                            All = \"all\"),\n    #                selected = \"head\")\n    # \n    \n\n    # Main panel for displaying outputs ----\n    # mainPanel(\n\n      # Output: Data file ----\n      # rhandsontable::rHandsontableOutput('contents')\n      # tableOutput(\"contents\")\n      DT::DTOutput('contents')\n\n    # )\n\n  \n)\n\n# Define server logic to read selected file ----\nserver <- function(input, output) {\n\n  # output$contents <- renderTable({\n  # output$contents <- rhandsontable::renderRHandsontable({\n  output$contents <- DT::renderDT({\n\n    # input$file1 will be NULL initially. After the user selects\n    # and uploads a file, head of that data file by default,\n    # or all rows if selected, will be shown.\n\n    req(input$file1)\n\n    # when reading semicolon separated files,\n    # having a comma separator causes `read.csv` to error\n    tryCatch(\n      {\n        # df <- read.csv(input$file1$datapath,\n        #          header = input$header,\n        #          sep = input$sep,\n        #          quote = input$quote)\n        df <- haven::read_xpt(input$file1$datapath)\n        # df <- rhandsontable::rhandsontable(df)\n        df\n      },\n      error = function(e) {\n        # return a safeError if a parsing error occurs\n        stop(safeError(e))\n      }\n    )\n\n    # if(input$disp == \"head\") {\n    #   return(head(df))\n    # }\n    # else {\n    #   return(df)\n    # }\n\n  })\n\n}\n\n# Create Shiny app ----\nshinyApp(ui, server)\n","type":"text"}]
